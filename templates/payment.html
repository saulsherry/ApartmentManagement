<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Payment - Account Manager</title>
    <link rel="stylesheet" href="/static/payment.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="nav-bar">
            <a href="/" class="nav-back">â† Dashboard</a>
            <span class="nav-title">ğŸ’³ Update Payment</span>
        </nav>

        <!-- Main Content - Split View -->
        <div class="split-view">
            <!-- Top Half: Operations -->
            <section class="operations-panel">
                <!-- Stats Display -->
                <div class="stats-display">
                    <div class="stat-item">
                        <span class="stat-number" id="totalAccounts">-</span>
                        <span class="stat-text">Total Accounts</span>
                    </div>
                    <div class="stat-item highlight">
                        <span class="stat-number" id="noPaymentCount">-</span>
                        <span class="stat-text">Without Payment</span>
                    </div>
                </div>

                <!-- Current Account Info -->
                <div class="current-account" id="currentAccountSection">
                    <p class="account-label">Next account to add payment:</p>
                    <p class="account-email" id="currentEmail">Loading...</p>
                </div>

                <!-- Instructions Panel -->
                <div class="instructions-panel">
                    <h4>ğŸ“‹ Instructions</h4>
                    <ol class="instruction-list">
                        <li id="step1"><span class="step-num">1</span> Click "Add Payment" to login and open payment
                            page
                            <div class="step-note">â³ We will automatically navigate to the payment input page. Please
                                wait.</div>
                        </li>
                        <li id="step2"><span class="step-num">2</span> Manually enter credit card details on the website
                        </li>
                        <li id="step3"><span class="step-num">3</span> Enter a card alias below (e.g., "Visa1234")</li>
                        <li id="step4"><span class="step-num">4</span> Click "Set Alias" to save and mark as complete
                        </li>
                    </ol>
                </div>

                <!-- Action Buttons Row -->
                <div class="action-row">
                    <button id="addPaymentBtn" class="primary-btn">
                        <span class="btn-icon">ğŸš€</span>
                        <span class="btn-text">Add Payment</span>
                    </button>
                    <button id="skipAccountBtn" class="secondary-btn">
                        <span class="btn-icon">â­ï¸</span>
                        <span class="btn-text">Skip Account</span>
                    </button>
                </div>

                <!-- Card Alias Input Row -->
                <div class="alias-row">
                    <div class="input-group">
                        <label for="cardAlias">Card Alias:</label>
                        <input type="text" id="cardAlias" placeholder="e.g., Visa1234, MC5678" disabled>
                    </div>
                    <button id="setAliasBtn" class="accent-btn" disabled>
                        <span class="btn-icon">âœ“</span>
                        <span class="btn-text">Set Alias</span>
                    </button>
                </div>
            </section>

            <!-- Console Section (Side) -->
            <aside class="console-panel">
                <div class="console-header">
                    <span class="console-title">ğŸ“Ÿ Log</span>
                    <button type="button" id="clearConsole" class="clear-btn">Clear</button>
                </div>
                <div id="consoleOutput" class="console-output">
                    <div class="console-line system">Ready. Select an account to add payment.</div>
                </div>
            </aside>
        </div>

        <!-- Bottom Half: Data Table -->
        <section class="data-panel">
            <div class="data-header">
                <h3>ğŸ“Š Account Data</h3>
                <span class="refresh-indicator" id="refreshIndicator">Auto-refresh: ON</span>
            </div>
            <div class="table-container">
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Full Name</th>
                            <th>Card</th>
                            <th>Remain Credit</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="4" class="loading">Loading data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <script src="/static/payment.js"></script>
</body>

</html>